{% extends 'base.html' %}

{% block content %}

{% block title %}{{ project.title }} - ESMT Tasks{% endblock %}

<div class="card">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>{{ project.title }}</h2>
            {% if user == project.creator %}
                <div class="btn-group">
                    <a href="{% url 'project_update' project.pk %}" class="btn btn-outline-primary">
                        Modifier
                    </a>
                    <a href="{% url 'project_delete' project.pk %}" class="btn btn-outline-danger">
                        Supprimer
                    </a>
                </div>
            {% endif %}
        </div>
        
        <p class="text-muted">
            Créé par {{ project.creator.username }} le {{ project.created_at|date:"j F Y" }}
        </p>
        
        <p>{{ project.description }}</p>
        
        <h3 class="mt-4 mb-3">Tâches</h3>
        {% if user == project.creator %}
            <a href="{% url 'task_create' project.pk %}" class="btn btn-primary mb-3">
                Ajouter une tâche
            </a>
        {% endif %}
        
        <div class="row">
            <div class="col-md-4">
                <h4>À faire</h4>
                {% include "tasks/task_list_partial.html" with tasks=project.tasks.todo %}
            </div>
            
            <div class="col-md-4">
                <h4>En cours</h4>
                {% include "tasks/task_list_partial.html" with tasks=project.tasks.in_progress %}
            </div>
            
            <div class="col-md-4">
                <h4>Terminé</h4>
                {% include "tasks/task_list_partial.html" with tasks=project.tasks.completed %}
            </div>
        </div>
    </div>
</div>
{% endblock %}